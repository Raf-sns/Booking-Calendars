/**
 * function Booking_calendars( Element, Options );
 * @Copyright RaphaÃ«l Castello - 24/12/2023
 * @License: AGPL-3.0
 * @Organisation SNS - Web et informatique
 * @Web www.sns.pm
 * Vanilla javaScript for display reserved dates in calendars
 * Version: 2.0.0 (07/05/2024)
 */
const Booking_calendars=(e,t)=>{t.year=t.year?t.year:(new Date).getFullYear();const a=e=>{let t=e.split("-"),a=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));return a.setHours(0,0,0,0),a};let n=0;const d=e=>{let d=[];for(;n<t.booked_dates.length;n++){let s=a(t.booked_dates[n].date_start),r=a(t.booked_dates[n].date_end);if(e.getTime()==s.getTime()&&d.push("BC-booked","BC-start"),e.getTime()==r.getTime()&&d.push("BC-booked","BC-end"),e.getTime()>s.getTime()&&e.getTime()<r.getTime()&&d.push("BC-booked"),r.getTime()>e.getTime())break}return-1!=d.indexOf("BC-start")&&-1!=d.indexOf("BC-end")&&(d.length=0,d.push("BC-booked")),d};let s,r,o,l,m,i,c,h,g,p,C,u,y,_,B,T,f,D=t.months_range?t.names_months.slice(t.months_range[0],t.months_range[1]):t.names_months,E=t.names_months.indexOf(D[0]);for(var b=0;b<=D.length-1;b++){s=document.createElement("table"),s.classList.add("BC-style_calendar"),m=document.createElement("tr"),i=document.createElement("th"),i.setAttribute("colspan","7"),i.classList.add("BC-month_name"),i.innerText=D[b]+" "+t.year,m.appendChild(i),s.appendChild(m),g=document.createElement("tr"),s.appendChild(g);for(var k=0;k<t.names_days.length;k++)p=document.createElement("td"),p.classList.add("BC-days_names"),p.innerText=t.names_days[k],g.appendChild(p);c=1,h=new Date(t.year,E,c),h.setHours(0,0,0,0),l=h.getMonth(),r=h.getDay(),o=h.getDay(),C=document.createElement("tr"),y=0==o?6:o-1;for(var x=y;x>0;x--)B=new Date(t.year,E,c-x),B.setHours(0,0,0,0),u=document.createElement("td"),u.classList.add("BC-day","BC-day_left"),u.innerText=B.getDate(),C.appendChild(u);for(;E==l;){if(u=document.createElement("td"),u.classList.add("BC-day"),u.innerText=h.getDate(),f=d(h),0!=f.length&&f.forEach(((e,t)=>{u.classList.add(e)})),C.appendChild(u),s.appendChild(C),c++,h.setDate(c),h.setHours(0,0,0,0),l!=h.getMonth()&&0!=r){_=7-r;for(var L=0;L<_;L++)T=new Date(t.year,l,c+L),T.setHours(0,0,0,0),u=document.createElement("td"),u.classList.add("BC-day","BC-day_left"),u.innerText=T.getDate(),C.appendChild(u)}l=h.getMonth(),r=h.getDay(),1==r&&(C=document.createElement("tr"))}E++,e.appendChild(s)}};
